{% extends "base.html" %}

<head>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.3/jspdf.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
</head>

<script>function getPDF(){
    var doc = new jsPDF();

    var specialElementHandlers = {
        '#getPDF': function (element, renderer) {
            return true;
        }
    };

    doc.fromHTML($('#htmldiv')[0], 20, 20, {'width':500,  'elementHandlers': specialElementHandlers});
    doc.save('TeamKiwi.pdf');}
 </script>

<div id="htmldiv">


{% block title %}
	{{ page.title }}
    {% if page.owner %}
      <h4>{{ page.owner }}'s profile page</h4>
    {% endif %}
{% endblock title %}

{% block content %}
  <div id="confirmDelete" class="modal hide fade" aria-hidden="true">
    <div class="modal-header">
      <h3>Are you sure?</h3>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to delete {{ page.title }}?  This cannot be undone.</p>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">No</a>
      <a href="{{ url_for('wiki.delete', url=page.url) }}" class="btn btn-danger">Yes, delete.</a>
    </div>
  </div>
	{{ page }}
{% endblock content %}

{% block sidebar %}
{% if page.tags %}
<h3>Tags</h3>
  <ul>
      {% for tag in page.tags.split(',') %}
        <li><a href="{{ url_for('wiki.tag', name=tag.strip()) }}">{{ tag|trim }}</a></li>
      {% endfor %}
  </ul>
{% endif %}
<h3>Actions</h3>
<ul class="nav nav-tabs nav-stacked">
	<li><a href="{{ url_for('wiki.edit', url=page.url) }}">Edit</a></li>
  <li><a href="{{ url_for('wiki.move', url=page.url) }}">Move</a></li>
  <li><a href="{{ url_for('wiki.saveas', url=page.url) }}">Use as Template</a></li>
  <li><a href="javascript:getPDF()" id="getPDF">Save as PDF</a></li>
    <li><a href="{{ url_for('wiki.get_md', url=page.url) }}">Save as Markdown</a></li>
  <li><a href="#confirmDelete" data-toggle="modal" class="text-error">Delete</a></li>

</ul>
{% endblock sidebar %}
</div>



